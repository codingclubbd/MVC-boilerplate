<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%=title%> </title>
    <!-----custom css link------>
    <link rel="stylesheet" href="/assets/css/createNewPassword.min.css" />

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@900&display=swap" rel="stylesheet" />
    <!-- meterial icon -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

    <!-----custom icons---->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet" />
    <!-- another google font icon link -->
    <link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <!-- font awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />

    <!-- Bootstrap CDN  -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
      crossorigin="anonymous"></script>

    <!------script js------>
    <!-- <script src="/assets/js/registrationFrontEndValidator.js" defer></script> -->
  </head>

  <body>

    <!-----Header Start------->
    <header>
      <div class="top_nav_section container-fluid">

        <!-----Announcement Text----->
        <div class="announcement_text">
          <span>Due to the COVID 19 epidemic, orders may be processed with a slight delay</span>
        </div>

        <div class="top_nav_items">
          <!-----Language Dropdown----->
          <div class="language_dropdown">
            <div class="dropdown-center">
              <button 
                class="language_btn dropdown-toggle" 
                type="button" 
                data-bs-toggle="dropdown"
                aria-expanded="false">
                  EN
              </button>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">EN</a></li>
                <li><a class="dropdown-item" href="#">Deutsch</a></li>
                <li><a class="dropdown-item" href="#">Fran√ßais</a></li>
              </ul>
            </div>
          </div>

          <!-----Money Dropdown----->
          <div class="money_dropdown">
            <div class="dropdown-center">
              <button 
                class="money_btn dropdown-toggle" 
                type="button" 
                data-bs-toggle="dropdown" 
                aria-expanded="false">
                $ USD
              </button>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#"> $ USD</a></li>
                <li><a class="dropdown-item" href="#"> $ EUR</a></li>
              </ul>
            </div>
          </div>

          <!-----Account Dropdown----->
          <div class="account_dropdown">
            <div class="dropdown-center">
              <button 
                class="account_btn dropdown-toggle" 
                type="button" 
                data-bs-toggle="dropdown" 
                aria-expanded="false">
                <i class="fas fa-user"></i> My Account
              </button>
              <div class="dropdown-menu">
                <input 
                type="text" 
                name="username" 
                id="dropdown_username" 
                placeholder="Username">
                Login
                <br>
                <input 
                  type="password" 
                  name="password" 
                  id="dropdown_password" 
                  placeholder="Password">
                <br>
                <input 
                  class="account_login_btn" 
                  type="submit" 
                  value="Log in">
                <h6><a href="">Forgot password?</a></h6>
                <h6>Don't have account yet? <a href="">Register here</a></h6>
              </div>
            </div>

          </div>
        </div>
    </header>
    <!-----Header End------->

    <main>
      <!-- login section start  -->
      <div class="wrapper">
        <div class="login-wrap mx-auto">
          
          <div class="">
            <div class="text-center text-light">
              <span
            class="user-icon material-icons " 
            id="basic-addon1">lock
          </span>
            </div>
            <h1 class="login_title">
            
              Create New Password
            </h1>
          </div>

          <!---- login form ------>
          <form method="post" action="/createNewPassword">
           
            <!-- email section -->
            <div class="mb-2 mt-4">
              <label 
                for="email" 
                class="form-label text-light">Create new password
             </label>
              <div class="input-group">
                <span 
                  class="input-group-text material-icons" 
                  id="basic-addon1">lock
                </span>
                <input 
                  type="password" 
                  id="password" 
                  class="form-control passwordField" 
                  placeholder="Enter your password"
                  aria-label="password"
                  name="password" 
                  aria-describedby="basic-addon1"
                  required /> 
               
                
              <span style="cursor:pointer"
              class="input-group-text material-icons passwordToggler"
              id="basic-addon1">visibility</span>

              </div>

              <% if(error.password){ %>
                <p class="error"><%= error.password.msg %></p>
              <% } %>
              
              
            </div> 
            <p class="error" id="passwordError"></p>
            
            <div class="mb-2">
              <label 
                for="email" 
                class="form-label text-light">Confirm your password
             </label>
              <div class="input-group">
                <span 
                  class="input-group-text material-icons" 
                  id="basic-addon1">lock
                </span>
                <input 
                  type="password" 
                  id="confrimPassword" 
                  class="form-control confirmPasswordField" 
                  placeholder="Enter your password"
                  aria-label="password"
                  name="confirmPassword" 
                  aria-describedby="basic-addon1"
                  required /> 
               
                
              <span style="cursor:pointer"
              class="input-group-text material-icons confirmPasswordToggler"
              id="basic-addon1">visibility</span>

              </div>

              <% if(error.password){ %>
                <p class="error"><%= error.password.msg %></p>
              <% } %>
              <!-- <p class="error r">*Password is required</p> -->
                <input type="hidden" name="otpId" value="<%=otp.otpId%>">
                <input type="hidden" name="otp" value="<%=otp.otp%>">
            </div>
            <p class="error" id="confirmPasswordError"></p>

            <!-- submit btn -->
            <div class="submit_btn">
              <button 
              type="submit" 
              id="submit" 
              class="submit">Save and Login</button>
            </div>
          </form>

          <p class="text-light text-center mt-2">
            Need to login <a href="/login"> Login Now </a>
          </p>
        </div>
      </div>
    </main>

    <!-----Footer Start--->
    <footer>
      <!-----Newsletter Section Start------>
      <div class="newsletter_section container-fluid">
        <h1>Subscribe</h1>
        <h4>$15 OFF on your first order of $199 or more</h4>

        <h6>Sign up for our Email Newsletter</h6>

        <div class="subscribe_section">
          <form action="" method="">
            <input type="email" name="e" id="e" placeholder="Type email..." />
            <select name="" id="sdf">
              <option value="type of business">Type Of Business</option>
              <option value="auction">Auction</option>
              <option value="automotive Other">Automotive Other</option>
              <option value="autobody">Autoboy</option>
              <option value="distributer">Distributer</option>
              <option value="mechanical">Mechanical</option>
              <option value="new car (1-4 location)">
                New Car (1-4 Location)
              </option>
              <option value="new car (5 + locations)">
                New Car (5 + Locations)
              </option>
              <option value="rv/motor home dealer">Rv/Motor Home Dealer</option>
              <option value="service/ repair facility">
                Service/ Repair Facility
              </option>
              <option value="tire dealer">Tire Dealer</option>
              <option value="used car (1-4 location)">
                Used Car (1-4 Location)
              </option>
              <option value="used car (5+ location)">
                Used Car (5+ Location)
              </option>
              <option value="other">Other</option>
            </select>

            <button class="newsletter_submitBtn">
              <i class="fas fa-paper-plane"></i> Subscribe
            </button>
          </form>
        </div>
      </div>
      <!-----Newsletter Section End------>

      <!-----Footer Menubar Section Start------>
      <div class="footer_menubar container">
        <div class="row">
          <div class="col-lg-3 col-md-6 col-sm-12 company_info">
            <div class="footer_menu_logo">
              <img class="footer_menu_logoImg" src="./assets/images/logo.png" alt="" />
            </div>

            <div class="company_address">
              <h6 class="pt-4">2543 Millennium Drive</h6>
              <h6>Elgin, IL 60124</h6>

              <p>Cell</p>
              <h6><i class="fas fa-mobile"></i> 626-423-2660</h6>
              <h6><i class="fas fa-mobile"></i> 914-928-8286</h6>

              <p>Email: <a href="#">MarketingDoor2DoorLLC@gmail.com</a></p>
            </div>

            <div class="footer_socialmedia">
              <a href=""><i class="fab fa-facebook-f"></i></a>
              <a href=""><i class="fab fa-instagram"></i></a>
              <a href=""><i class="fab fa-whatsapp"></i></a>
              <a href=""><i class="fab fa-twitter"></i></a>
              <a href=""><i class="fab fa-youtube"></i></a>
            </div>
          </div>

          <div class="col-lg-3 col-md-6 col-sm-12 category_list">
            <h6>Shop by Category</h6>

            <ul>
              <li class="footerMenu_title">
                <a href="#">Advertising & Sales</a>
              </li>
              <li><a href="#">Apparel</a></li>
              <li><a href="#">Detailling Supplies</a></li>
              <li><a href="#">Envelops & Forms</a></li>
              <li><a href="#">Flags</a></li>
              <li><a href="#">Key Tags</a></li>
              <li><a href="#">Key Storage</a></li>
              <li><a href="#">License Plate Accessories</a></li>
              <li><a href="#">Personalized Products</a></li>
              <li><a href="#">Safety & Personal Protection</a></li>
              <li><a href="#">Service</a></li>
              <li><a href="#">Windshield Marketing</a></li>
              <li><a href="#">Sale</a></li>
              <li><a href="#">Seasonal</a></li>
              <li><a href="#">Shop Supplies</a></li>
            </ul>
          </div>

          <div class="col-lg-3 col-md-6 col-sm-12 ourComany_list">
            <h6>Our Company</h6>
            <ul>
              <li><a href="#">About Us</a></li>
              <li><a href="#">Catalog Request</a></li>
              <li><a href="#">Privacy Policy</a></li>
              <li><a href="#">Return Policy</a></li>
              <li><a href="#">Shipping Policy</a></li>
              <li><a href="#">Terms &Condition</a></li>
              <li><a href="#">Site Map</a></li>
            </ul>
          </div>

          <div class="col-lg-3 col-md-6 col-sm-12 help_info_list">
            <h6>Help & Info</h6>
            <ul>
              <li><a href="#">My Account</a></li>
              <li><a href="#">Customer Service</a></li>
              <li><a href="#">Order Status</a></li>
              <li><a href="#">Resources</a></li>
              <li><a href="#">ADA Compliance</a></li>
              <li><a href="#">Online Catalog</a></li>
            </ul>
          </div>
        </div>
      </div>
      <!-----Footer Menubar Section End------>

      <hr class="container" />

      <!-----Footer Copyright Section Start---->
      <div class="container copyright-section">
        <div class="copyright_text">
          <h5>Copyright ¬© 2022 Marketing Door2Door</h5>
        </div>

        <div class="creditCard_image">
          <img class="creditCard_img" src="./assets/images/credit_cardlogos.jpg" alt="" />
        </div>
      </div>
      <!-----Footer Copyright Section End---->
    </footer>
    <!-----Footer End----->


    <script  src="assets/js/eye.js"></script>

    <script >
          // password toggler
        const passwordToggler = document.querySelector(".passwordToggler")
        const password = document.querySelector(".passwordField")
    
        passwordTogglerFunc(passwordToggler, password)
    
        // confirm password toggler
        const confirmPasswordToggler = document.querySelector(".confirmPasswordToggler")
        const confirmPasswordField = document.querySelector(".confirmPasswordField")
        passwordTogglerFunc(confirmPasswordToggler, confirmPasswordField)
    








/* ========== check password============= */




//password
const passwordEl = document.querySelector('.passwordField');
const passwordError = document.getElementById("passwordError");
// confirm password
const confirmPasswordEl = document.querySelector('.confirmPasswordField');
const confirmPassErr = document.getElementById('confirmPasswordError')


// hidden the error 
confirmPassErr.hidden = true;
passwordError.hidden = true;

// typing detector
let typingTimer;
const doneTypingInterval = 500;





    

        // password validator
function validate(p) {
  var errors = []

  if (p.length < 8) {
    errors.push("8 characters")
  }
  if (p.search(/[a-z]/) < 0) {
    errors.push("1 lowercase letter")
  }
  if (p.search(/[A-Z]/) < 0) {
    errors.push("1 uppercase letter")
  }
  if (p.search(/[0-9]/) < 0) {
    errors.push("1 digit.")
  }
  if (p.search(/[\!\@\#\$\%\^\&\*\(\)\_\+\.\,\;\:\-]/) < 0) {
    errors.push("1 special character.")
  }

  return errors;
}


// check password
const checkPassword = (password, confirmPassword) => {
  let validationResult = []
  if (password) {
     validationResult = validate(password)
  }

  if (validationResult.length > 0) {
    const errorMsg = "Your password must contain at least " + validationResult.join(',');

    if (password) {
      passwordError.hidden = false;
      passwordError.textContent = errorMsg

    }

  }

  if (confirmPassword) {
     
    if (!(passwordEl.value === confirmPasswordEl.value)) {
      confirmPassErr.hidden = false;
      confirmPassErr.textContent = "Password doesn't match"
    } else {
      confirmPassErr.hidden = true;
      confirmPassErr.textContent = ''
    }
  }

}





//on keyup, start the countdown
confirmPasswordEl.addEventListener("keyup", function () {
  clearTimeout(typingTimer);
  // reset
  confirmPassErr.hidden = true;

  if (confirmPasswordEl.value) {
    typingTimer = setTimeout(() => checkPassword(null,confirmPasswordEl.value), doneTypingInterval);
  }
});

//on keydown, clear the countdown
confirmPasswordEl.addEventListener("keydown", function () {
  clearTimeout(typingTimer);
});





//on keyup, start the countdown
passwordEl.addEventListener("keyup", function () {
  clearTimeout(typingTimer);
  // reset
  passwordError.hidden = true;

  if (passwordEl.value) {
    typingTimer = setTimeout(() => checkPassword(passwordEl.value), doneTypingInterval);
  }
});

//on keydown, clear the countdown
passwordEl.addEventListener("keydown", function () {
  clearTimeout(typingTimer);
});


        
    </script>

  </body>

</html>